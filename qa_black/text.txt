您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

HTML&CSS构建网站链接 携程突围——携程副总裁兼无线事业部总经理江浩专访
三
04
阿里云观察——阿里云总裁王坚专访
作者： baiyuzhong分类：云计算, 热点报道, 高端视点  阅读：1,860 次 添加评论
文 / 《程序员》总编辑  刘江

2011年底，我走访了阿里云计算公司在杭州的总部，与掌门人王坚博士及其核心团队成员有较长时间的对话，第一次近距离接触阿里云。那时，阿里云在移动操作系统和云计算平台两大正面战场双线作战，布局宏大，而成绩还没太见到，来自内外的质疑颇多。我随后写出的《追寻凌云梦》（见《凌云》第一期）一文最后总结说：“阿里云的战略方向是正确的，自主研发核心系统的勇气也令人敬佩。”

但当时我也看到，阿里云在技术和业务两方面困难都不小，王坚及其团队都承受着巨大的压力，所谓前途光明、道路曲折。事实上，按王坚自己的话说，从2008年10月开始写阿里云平台第一行代码，就走上了不归路，最初创始的几十人历经几次架构大改，已经“死”了几批，坚持下来的已经不到十个。

进入2012年，全球范围内Google、Apple、Facebook和Amazon几大巨头之间从硬件到软件、从移动到云计算平台、从应用开发者到数字媒体内容发行等整个生态环境的全面竞争成为IT行业的主旋律，国内各大互联网企业和IT厂商在各大入口、搜索、云计算、开放平台、电子商务、支付等领域的明争暗战也此起彼伏。这些都从某种意义上说明，像阿里这样规模的平台企业，多个方向的正面战争其实势所难免。



2012年，互联网公司做手机成为热潮，阿里云被媒体关注的焦点也始终是云OS这个手机操作系统。与天语的合作与分手，与海尔的合作，直到9月与宏碁的合作因来自Google的压力而搁浅。不久，云OS从阿里云公司独立，合作的手机厂商中也开始出现比较草根的北斗小辣椒和原来主要面向海外的乐丰（它们的注册商标很有意思，是Lephone）这样的品牌。

而媒体聚光灯外，阿里的云计算业务进展顺利，无论按规模还是产品线已经成为中国的行业领导者。在2012年11月9日的阿里云开发者大会期间，我与王坚博士再次对话。他透露已经有数万个网站、应用和游戏建在阿里云之上，支撑过亿用户访问。在阿里云宣传材料中，客户名单里既包括联想、施耐德、创维、中软国际、中国网络电视台、DeNA这样的国内外大企业，也有虾米、唱吧、周末画报、ifanr等众多移动和互联网新锐公司，还有阿里集团内部的聚石塔（淘宝和天猫的开放平台）、冰火鸟（阿里集团的统一数据平台）、阿里金融和雅虎中国邮箱等海量用户的应用。由弹性计算、存储和数据服务、大规模计算、云引擎等产品与服务，涵盖IaaS、PaaS和SaaS，丰富的产品线也成为用户选择阿里云的主要原因之一。

紧接着的淘宝天猫“双十一购物狂欢节”，191亿元交易额中，有20%的订单处理由阿里云承担，而阿里云支撑的聚石塔更是为节日中不少创了记录的商家立下汗马功劳。

从服务网商到赋能开发商：阿里的云计算基因

阿里云能达到这样的地位当然并不令人意外，阿里的资源、品牌号召力和实力在那里。无论是资金投入还是多年的基础设施和技术积累，包括运营商级别的骨干网络、BGP带宽和国内领先的CDN网络，还有万网多年的服务经验，都是目前其他云计算提供商无法匹敌的。

然而，阿里云的领先其实从某种意义上也反映出中国云计算的尴尬现状。我们知道，全球范围内云计算平台最成功的案例是Amazon的AWS，主要通过公共IaaS的建设与运营，并逐步向PaaS扩展，已经建立起繁荣的生态系统，为美国移动和互联网近年来一大批新兴创业公司的崛起提供了坚实的基础设施，起到了至关重要的作用。

而在国内，云计算表面上虽然热火朝天，中国电子学会与CSDN合办的标志性活动“第四届中国云计算大会”已经将2012年称为“中国云计算实践元年”，但除了政府支持下的“数据中心建设热”之外，真正像阿里这样坚决投入通用公共云计算的，其实屈指可数。最明显的证据，就是曾有业内人士点评国内云计算时认为，第一阵营中有三家企业，阿里云和万网就占据了两席。其他有相当实力的企业虽然也有云计算的项目，却大多选择了紧贴自身业务、服务垂直性开放平台的路子。即使模式上最像Amazon的盛大云，最近也开始更多地将资源投到视频等垂直领域，并将自己的定位转向盛大内部内容资源的分发、支付与用户数据管理。

对此，王坚在访谈中透露，阿里最初准备成立云计算公司时，他其实很想将公司名称定为“通用计算公司”。与通用电气实现了电气化一样，阿里云从第一天起要做的就是通用计算。而大部分公司还是低估了通用云计算的技术和提供有竞争力商业服务的难度。在某些垂直领域做，门槛可能会降低，但由此出发要做成一个大规模通用云计算服务平台的可能性则会越来越小。这也是阿里云要自己顶着巨大的风险，不是从现成的开源技术出发，而是选择从零开始自己开发一整套代码，想把Google和Amazon在架构上的优势结合起来的原因所在。今天能够真正提供全面云计算服务的公司不是在增多而是在减少，用户的多样性抬高了云计算的门槛。

王坚这样解释阿里云跟其他开放平台不一样的地方：

“阿里云唯一的业务就是云计算。云计算是有两种，一种是集成在其他业务上的，另一种是不集成在其他业务上的。阿里云是不集成在任何业务上的，只是单纯的云计算。为什么呢？因为只要着眼于业务上，就一定永远是业务的附属品，而用户唯一需要的却是计算能力。因为不集成在任何业务上，所以用户可以在上面开展任何的业务，它是一个真正的开放平台。什么叫开放？这个问题我想了很久，开放就是要让小公司能做大公司的事情，同时也要让大公司能做小公司的事情。这才是我们努力的方向。”

阿里与其他平台为何会有这样的区别？王坚认为是公司的基因使然。在他看来，阿里与生俱来就是一家打抱不平的公司，阿里B2B和淘宝、支付宝，无不是为“小而美”的个人和中小企业等相对弱者提供平台，让它们发挥自己的创造性，开创各种业务，帮助它们发展壮大。

阿里云也是一样。在2012阿里云开发者大会上，王坚的演讲稿只有一页，题目是“开发者·飞天·云OS·开发者”。演讲的第一句话是：“在我眼里没有领导，也没有嘉宾，只有一个人，就是开发者。”在解释为什么阿里云要在开发者社区投入这么多资源，举行阿里云开发者大赛、阿里云开发者大会，并推出开发者认证计划时，王坚的回答是：“因为阿里云就是为开发者而生的。”他更愿意将Developer翻译为开发商，开发商之于阿里云，正如当年网商之于阿里和淘宝。其中的开发商既包括联想、海尔、E人E本、小辣椒、乐丰这样的硬件开发商，也包括广大软件开发者和软件企业。将硬件和软件开发商连接起来，这是阿里做云OS手机操作系统的目的。而阿里云的任务是提供技术和资源支撑，让一个人也可以做之前大公司才能做的事情。而云计算环境也能促使一家传统大公司的业务流程与组织结构发生变革，达到互联网和中小企业的灵活性与效率。“如果没有福特生产线，电是没有价值的。”王坚喜欢将云计算带来的变革与电气化相提并论。电气化改变了诸多行业乃至整个社会的面貌。阿里集团习惯用对整个社会的贡献和影响有多大来评估业务，赢利则是副产品。这正是阿里的基因。

2012：不平静的一年

外界可能并不知道的是，这一年阿里云过得并非一帆风顺。这也是中国云计算实践的缩影。阿里云的第一个云计算服务——云服务器上线，曾经令许多得风气之先的中小开发公司兴奋不已。之前它们后端的选择，要么是国内IDC服务器托管，运维的压力山大；要么是国外的云服务，又不得不忍受网络的龟速。

然而，真正用上云服务器之后，早期用户却发现阿里云平台虽然网络非常出色，但服务并不稳定，故障率偏高，偶尔还会发生数据损失，I/O性能较差更是被诟病最多的地方。这些问题随着平台不断改善都逐渐得到了解决之后，王坚却发现了一个更大的问题：服务意识。

回顾2012年，王坚认为阿里云最大的变化是意识到服务的重要性。阿里云之前的精力主要放在技术研发上，只是在做软件，让平台运行起来。对外提供服务之后，这种思路仍然没有转变过来，加之经验不足，出现了不少服务质量问题。

有一次，王坚听说阿里云的一家做团队协作SaaS服务的小客户TeamCola（彩程设计）因为不满服务质量而选择了离开，询问之后却发现公司里居然没有人知道此事。原来，是阿里云的工作人员仅仅由于TeamCola的某个域名没有完成备案，未经通知就停止了云服务器访问。“即使是最官僚、最传统的IDC在停服之前都会打个电话告知一下，”TeamCola的创始人沈学良后来回忆，“这样的服务意识，彻底摧毁了我们的信心。”王坚为此大发雷霆，并在公司内部做了一次大整顿。他对同事说：“如果我们成为一家傲慢的公司，也就离死亡不远了。”

同时在公司内部，在流程上提高平台组件的产品化程度，更方便用户自助服务。将运维责任明确拆分出去，开发人员把产品交付后，就由运维来维护，两者是背靠背的关系，以提升对外服务质量。此外，增加了产品经理的人数，强调他们与客户的直接沟通。

这次整顿以及后续相应的新产品与服务包括服务器监控、在线自助备案和故障热线电话的上线，阿里云在服务质量方面有了显著改善。据我的观察，在新浪微博上，阿里云的几个官方微博尤其是 @阿里云客户满意中心 对客户抱怨的反应速度和服务态度是所有云计算公司里最好的。许多阿里云的员工也非常活跃，几乎每条有关阿里云的微博下面都有阿里云方面的回应。

这种改善也得到了客户的认可。2012年8月，TeamCola再次将应用迁回阿里云。沈学良在采访中表示：“事实证明，这个决定是正确的。到目前为止，阿里云的正常运行时间一直是100%，我们将把所有的服务都部署到阿里云，也就是把公司的未来放到阿里云的平台之上。”我采访的另一位用户，虽然对阿里云有很大抱怨，但对其服务态度仍然予以肯定。

另外，阿里云没有采用传统IDC的人工销售模式，仅依靠自助服务，业务也实现了快速增长，被王坚认为是2012年另一个重要的收获。由技术布道师而不是对技术和产品不那么了解的市场营销人员针对用户进行产品宣传推广，解答技术问题，起到了很好的效果。

“客户教会了我们非常多东西，甚至改变了我的世界观。”王坚认为2012年的业务发展、客户增加使阿里云获益良多。“是开发者、客户真正在教我们怎么做云计算。”这也是他高度重视开发者大会和社区建设的原因。

来自内部的争议

阿里云的挑战并不只限于外部。接触过王坚的人都能感觉到，他的想法富有前瞻性和战略高度。一个明显的例子就是，阿里云早在2009年成立时就以“打造以数据为中心的先进云计算服务平台”为使命，而那时候大数据在国内还远没有成为热门话题。

在阿里内部，能充分理解王坚想法的人并不多。在知乎上的“王坚是一个怎样的人”问题下面，有不止一个阿里员工表示经常听不懂王坚的话。在阿里采访过程中我还得知，即使是在公司高层，除了马云和战略学教授出身的阿里总参谋长曾鸣之外，也有很多人无法完全跟上王坚的思路，经常需要曾鸣的进一步阐述。

而作为通用计算平台，阿里云曾经最为人质疑的地方，是阿里集团内部没人用。这实际上是在说，没有大的有说服力的内部应用案例。在阿里集团内部，阿里云和其他业务部门的研发团队之间，的确长期存在技术路线之争。其中原因并不难理解。

将集团内部现有的已经垂直优化的核心业务系统，迁移到阿里云这个相对还不那么成熟而且技术体系不易兼容的平台，无论从技术本身还是相关技术人员的感情与利益来说，都存在巨大的挑战和冲突。这种冲突与对王坚本人以及阿里云本身的业务发展情况的评价混合在一起，在阿里内部曾经引起了激烈的争论甚至直言不讳的批评。但王坚和阿里云的战略方向得到了马云的坚定支持。在阿里集团“平台、金融和数据”三大板块中，阿里云显然占据重要位置

2012年8月，王坚被任命为阿里巴巴集团首席技术官兼任阿里云总裁，在云计算业务之外，同时全面负责规划、制定和实施集团技术发展战略。马云曾在内部论坛上发文“我心目中的王坚博士”，文中有这样的力挺：“王坚的长处不是很多人能懂的……如果阿里巴巴十年前就有他，公司今天的技术可能会很不一样。”这一任命实际上决定了阿里云将在集团各业务部门未来的技术研发方向上发挥更重要的作用。

此外，之前阿里云和万网在云主机业务上的重叠，也随着万网并入阿里云，成为域名品牌而得到解决。阿里云发展的两大障碍已经解除。

未来的机遇与挑战

应该说阿里有做云计算得天独厚的条件。基础平台型的云计算，注定将是长线项目，靠长期投入，集沙成塔，由量变最终促成质变。而这正符合阿里的基因。2011年采访时，王坚曾表示，集团对云计算有足够的耐心和坚持，马云本人是铁杆的支持者，“有这么幸福的环境，如果还做不成的话，只能说是我们这帮人无能。”

从大环境来说，阿里云在国内目前没有真正的对手，2013年将继续享受较长时间的机遇窗口。互联网同行里，像阿里这样同时具备了决心和实力的，还没有第二家。而IT厂商和电信运营商虽然也都有自己的优势，但想同时补上平台技术能力、运维和运营经验的短板，挑战巨大。国外的微软和Amazon即使能顺利进入中国并提供服务，但要想具备相当的竞争力和品牌号召力，还需要时间。正因为如此，有一位做技术的朋友对阿里云目前的技术水平虽然评价不高，但仍将网站架构在阿里云上，因为别无选择，“其他的更差”。

阿里云面临的挑战也显而易见。中国特殊的监管环境和网络环境都是。而作为一个新兴行业的开拓者，他们要解决众多前人没有遇到的问题。阿里集团内部各业务线的技术与阿里云的整合能否顺利，也值得关注。如果在某一核心业务迁移到阿里云的过程中出现严重失误，对阿里云的发展将是巨大挫折。

宏观来看，云计算行业本身的商业模式，在中国这样的环境下，还不是特别明确。即使是看上去红红火火的Amazon云计算平台，在迅速发展超过十年之后，业界分析2012年的营收也不过在20亿美元水平，利润也不高。相比之下，Apple可能用少得多的资源支撑一个iTunes+iCloud，营收和利润都要好得多。这种机会成本的诱惑，对阿里云能否坚持目前的战略，持续投入，改善产品和服务，可能是更严峻的隐性挑战。

全球范围内，Amazon云计算对整个新兴产业的发展无疑举足轻重。对于中国来说，阿里云的成败也有类似的份量。让我们祝福阿里云。

更多精彩内容敬请关注《凌云》专区

《程序员》2013年杂志订阅送好礼活动火热进行中



CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

One Response to “阿里云观察——阿里云总裁王坚专访”
逆袭网 说道：
2013年03月7日 12:40 下午
听起来不错嘛

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved

您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

传统消费电子产业升级，从云开始——酷开网IT架构变革之路 Android软件安全开发实践（下）
二
27
云推荐——大数据时代的个性化互联网服务解决之道
作者： baiyuzhong分类：云计算  阅读：1,395 次 添加评论
文 / 韩定一

个性化是商业的未来

现代社会是一个商业社会，工业化解决了批量生产商品的问题，促进商业蓬勃发展。随着社会的不断发展，商品也越来越多样化，以期满足大众的不同需求。以电视机为例，最初只有尺寸的区别，后来可以选择品牌型号。直到2011年9月27日，海尔和天猫在网上发起用户定制电视的活动：用户可以在电视机生产以前就选择电视尺寸、边框、清晰度、能耗、颜色、接口等属性，再由厂商组织生产并送货到客户家中。这样的个性化服务受到广泛欢迎，2天内1万台定制电视的额度被抢光。类似的定制服务在空调、服装等商品上都受到用户欢迎。这些事例已经展示了未来商业的曙光——通过满足个性化需求来使用户得到更满意的产品，进而缩短设计、生产、运输、销售的周期来提升商业运转的效率。

大数据是实现个性化的基础

要实现个性化的商业模式，充足的数据是基础。比基尼生产厂商都知道他们的产品在海滩边或滨海城市有市场。可有谁能料到新疆和内蒙古的男人最爱给自己女人买比基尼呢？这样的“潜规则”隐藏在数据中，需要深挖才能见天日，就像“啤酒和尿布”的经典故事那样。而“大数据”相对于传统的数据挖掘更进一步。数据量大、数据种类多、数据之间有潜在关联是挖掘大数据的前提。整个互联网的用户和所有的商品本身就是一个足够大的数据空间，加上空间、时间、天气等潜在相关因素，想要知道每个用户的喜好，所需要的数据量是巨大的。数据越多对用户的理解越精准。

互联网大数据处理的技术挑战

处理互联网大数据充满挑战，首当其冲的就是处理大数据的能力。为使消费数据的速度赶超生成数据的速度，拥有足够的计算资源是必要条件。在此基础上，线性扩展的计算框架、高效稳定的程序设计以及精准的算法都是大数据处理的核心能力。

第二个挑战便是时效性。用户在互联网上的操作不断地暗示其意图，只有及时感知到这些意图，才能在用户下一次操作前做出有效的响应，最终给用户带来便捷。这样的时效性要求系统的计算框架能够以数据流的方式来运转。最终导致系统在如何实时分流负载、实时容错等问题上采用与传统批量大数据处理截然不同的技术方案。

为了更大程度地满足个性化需求，还必须具有足够强大的定制能力。一方面，尽管单个用户的定制需求可能很小，但用户数量巨大，定制需求迥异，不是几个工程师努力下就能完全解决问题的。需要有像数据库SQL语言那样给用户足够多的自由，使再小的需求通过简单的操作就能满足。这样的定制能力要在数据的存储、运算、查询、展现等多方面都有体现。

阿里云的解决之道——云推荐

不论是收集大数据的计算和存储能力，还是处理个性化问题所需要的实时计算和算法技术，对于网站站长和开发者而言都是不容易快速得到解决的问题。阿里云正试图通过云端服务来降低个性化服务的门槛，使更多网站站长和开发者能够低成本享有自己的个性化服务。其中，云推荐（http://tui.cnzz.com/）便是一个典型。



如果某网站是介绍美食菜谱的，用户在浏览“茶树菇鸡汤”的时候，若能有些相关菜谱推荐，那么便可以让用户在网站内停留更多时间，访问更多内容。事实上，有多种推荐算法可以找到用户感兴趣的内容。

从用户访问日志里面也许发现用户访问好这个菜谱以后五成用户都会去看看“补血益气乌鸡汤”，这种现象一定有其背后的理由，也许会成为一个不错的推荐。
既然用户在看“鸡汤”类别的菜谱，那就可以把网站里面其他热门的“鸡汤”菜谱推荐出来，如“香菇鸡汤”。
通过分析某一个用户过去历史的访问记录，或许能发现该用户相对于其他用户更偏向于文火慢炖的汤，那就应该适当推荐出类似“炖鸡汤”这样的菜谱。
相对于“鸡汤”而言，“羊肉汤”也是汤类别的热门品种，用户也许会吃鸡汤吃腻了想换换口味。
然而，要实现这样的推荐，传统的做法需要大量人工编辑工作。既不能做到即时，也很难保证效果。人工编辑更难验证这些推荐算法是否能在真实流量上产生足够好的效果。一个精准的推荐模型，必须对算法本身的整体效果以及用户对各种算法推荐结果的偏好作一个综合评估，这样才能找到适合每一个用户的精准推荐模型。最终让用户享受到推荐展位“千人千面”的个性化服务。

<script  type=”text/javascript” charset=”utf-8″ src= “http://tui.cnzz.net/cs.php?id=1000001234″></script>

使用云推荐服务，只需网站开发人员在云推荐网站（http://tui.cnzz.com/）注册申请，得到一个十位应用ID，如“1000001234”。并将系统生成的JavaScript代码（如上例）内嵌在网页代码中便可以得到个性化推荐结果（如下图）。这个过程一般一分钟即可完成。随后的事情就交给云端系统了。它会开始对网站进行礼貌的抓取和深度分析：识别出真正包含内容的页面，并抽取出页面标题、图片等作为推荐的素材。系统还会持续根据展现的点击效果自动调整推荐算法的模型和权重。



在云推荐的管理界面里，网站开发人员可以定制推荐位置大小、推荐内容条目数、URL范围、展现形式等参数。网站站长还能看到推荐展位的点击情况，并根据建议适当调整推荐位置参数以改善效果。

云推荐服务还针对主流建站工具Wordpress、Discuz！、DeDeCMS等提供插件支持。开发人员在安装插件之后，即可在建站工具管理界面来操作并管理云推荐的各项功能，详情请参考云推荐官网（http://tui.cnzz.com/）。

根据后台统计，网站启用云推荐后的整体流量会提升10%。这样的个性化服务让人感觉就像是钱存银行能拿到利息一样，是大数据魅力的展现。相信随着数据的不断积累及用户数量的累积，个性化服务在大数据时代能给人带来的远不止10%流量提升这样的惊喜！

作者韩定一，阿里云计算有限公司高级专家，上海交通大学博士。目前负责用户行为分析部门研发工作，产品包括：移动搜索应用技术、全网数据平台、全网用户行为分析平台等。加盟阿里云之前，在上海交通大学从事信息检索方向的研究工作，发表过论文20多篇。《Web数据挖掘》译者之一。

更多精彩内容敬请关注《凌云》专区

《程序员》2013年杂志订阅送好礼活动火热进行中





CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

One Response to “云推荐——大数据时代的个性化互联网服务解决之道”
编程中国社区 说道：
2013年02月28日 1:01 下午
这个功能非常不错，使得网站能为用户提供更多有价值的东西

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved



您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

如何打造合作型团队——阿里内贸团队敏捷实践 同步盘牵手阿里云,构建企业文档管理利器
二
26
云环境下的信息安全
作者： baiyuzhong分类：云计算, 坊间人语, 架构实践  阅读：1,458 次 添加评论
文 / 沈锡镛

背景：阿里云已获得由BSI（英国标准协会）审核的ISO 27001信息安全管理体系国际认证，该体系涵盖基础设施、数据中心和云产品，包括阿里云弹性计算、开放数据处理服务（ODPS）、关系型数据库服务（RDS）、云安全服务（云盾）。ISO 27001是一种被广泛采用的全球安全标准，它建立在定期评估风险的基础上，采用安全控制和最佳实践相结合的系统化方法来管理公司和客户信息。为了实现认证，阿里云必须表明它有一个系统的和持续的方法来管理信息安全风险，影响公司及客户信息的保密性、完整性和可用性。该认证巩固了阿里云对安全控制透明化的服务承诺。

本文拟从分析传统信息安全管理和云计算安全管理的差异性入手，提出云计算服务商所面临的安全问题，讨论阿里云计算在满足云计算安全管理的实践。

云计算安全的挑战

传统信息安全和云计算安全的区别

PC时代是分散化管理，用户的数据是保存在自己的电脑上的，保障用户数据的安全很大程度上是靠用户本身的安全意识和技术水平，而大部分用户又极缺乏自我保护意识，因而钓鱼、木马、肉鸡横行，用户的安全受到很大威胁。云时代是集中化管理，通过计算资源的集中和优化，使多个应用更有效的分享服务器CPU、内存、存储以及网络带宽，用户的数据保存在有专业安全人员保护的云环境中，黑客常用的传统用户终端攻击失去威胁。在与黑客的博弈之中，集中化管理更容易升级安全保护措施，安全性比PC时代要高从安全管理角度来看，集中化管理和分散化管理就像乘飞机旅行和汽车旅行的安全比较一样，汽车旅行的事故率非常高，但往往每起事件只影响到一两个人，而飞机旅行是最安全的，但不出事则已，一出事都是大事。如果云服务商不能给客户提供一个客观、公正、可靠的安全保证，就无法让用户对云服务建立起安全信心，最终影响云业务的开展和行业的壮大。

云环境下的典型安全挑战

从安全技术角度来看，虚拟化技术在云计算时代的大量应用让传统信息安全时代下的安全隔离手段面临巨大挑战，举例来说，客户在购买云服务商虚拟服务器的同时就拥有了公网地址和云服务商的内网地址，这也就意味着用户同时拥有了云服务商的非信任域地址和信任域地址，这种网络边界模糊的威胁会直接导致恶意用户利用购买虚拟服务器所获得的云服务商内网地址来伪造海量的内网地址和MAC地址，在网络中产生大量的ARP通信量使得网络阻塞或中断。

其次，安全挑战伴随着云平台的服务类型而随之诞生，以阿里云开放数据处理服务ODPS举例，该服务的设计之初是基于数据驱动的多级流水性并行计算框架，支持直接使用ODPS SQL语句对海量数据进行离线分析。通过数据分裂将海量数据散布在整个集群内部，这样，用户的数据容量的瓶颈问题得以解决。同时，计算压力也被平均分布在集群内部，很好地解决了计算性能问题。但因其允许用户通过编写程序在ODPS的集群上执行任务，这种业务模式就存在通过用户程序包含的恶意代码在ODPS的集群上植入后门的风险，恶意用户可通过非法外联、提权等一系列操作实现对ODPS集群的入侵，最终达到窃取用户数据的目的。

面对上述安全技术挑战，在云时代已无法通过简单的安全设备堆砌去解决所有安全问题，同样，传统信息安全时代下的安全标准和规范也已不能从容应对上述管理挑战。为此，阿里云开发了包含3大信息安全基础控制域、7大信息安全和云计算安全支柱控制域及2大云计算安全特色控制域的阿里云安全模型（如图1所示）。我们将传统信息安全管理体系中的信息安全风险管理、人力资源、物理、网络和主机安全、业务连续性和灾难恢复、数据中心运维作为云服务商的安全基线，重点评估、持续提升云服务商在虚拟化安全和云平台安全方面的安全管理和技术水平。


图1 阿里云安全模型
云时代下的虚拟化安全主要包括虚拟服务器的加固、虚拟服务器的隔离、虚拟服务器的销毁，虽然因虚拟化服务器的服务类型的原因，以上需求已无法通过购买安全设备实现隔离，但针对用户和云服务商自身的安全需求仍可通过一系列的软件手段实现安全隔离和访问控制。

虚拟服务器的加固

在安全流程方面，阿里云通过建立安全加固流程来保证每个交付给客户的虚拟服务器镜像在生产环节已通过安全团队的严格检测，去除了不安全的服务、协议、端口等可能导致入侵的因素。

在安全技术方面，阿里云已陆续发布了CentOS 6.2 64位安全加固版、Red Hat Enterprise Linux Server 5.4 64位安全加固版Windows Server 2003标准中文版 SP2 32位已加固激活三个经过安全加固的操作系统；阿里云的云安全产品——云盾更通过提供主机入侵检测和补丁自动更新服务等手段来保证用户虚拟服务器的安全，并针对用户需求有针对性的对虚拟机镜像提供加密服务。

虚拟服务器的隔离

用户租用云服务器就好比将用户网站搬进了一个个虚拟房间，最担心的就是破门而入的不速之客，这种安全顾虑就是由虚拟服务器而引发的网络边界模糊威胁，而解决之道不再是传统信息安全环境下的防火墙之类设备的堆砌，取而代之的是阿里云自主开发的一系列虚拟环境下的网络隔离手段。

阿里云针对不同用户购买的云服务器之间的隔离需求，在其生产环节由云服务器的生产系统依据订单自动给每个用户的云服务器打上标签，不同的用户间通过安全组进行隔离；针对本文开篇提及的恶意虚拟服务器用户通过制造大量的ARP通行量来导致网络面临阻塞或中断的风险，阿里云采用上述云服务器标签和arptables相结合予以防范；最后为防范云服务器被入侵后成对对外攻击源，阿里云采用以太网防火墙（ebtables）隔离云服务器对外部公共网络的异常协议访问。


图2 云平台安全开发流程
虚拟服务器的销毁

针对用户云服务器在期满后的数据销毁问题，阿里云的云服务器生产系统会定期自动虚消除原有物理服务器上磁盘和内存数据，使得虚拟服务器无法恢复。同时，采用虚拟化在线管理系统对虚拟服务器进行管理，对物理服务器及Hypervisor的运维操作，遵循运维相关流程并采用实时审计技术予以监控。

云时代下云平台是一切云服务的最终载体，其自身的安全态势直接决定各项云服务的正常开展，从以上虚拟化安全的控制手段已然可以发现通过软件实现安全控制将是云安全的主要技术实现途径。而云平台自身也是软件开发的产物，由此，构建云平台安全就应从云平台的初始开发以及云服务带给云平台的安全冲击等角度予以考虑。

云平台的开发推荐参照软件安全开发周期（Security Development Lifecycle）建立安全开发流程如图2所示。
安全需求分析环节：应根据功能需求文档进行安全需求分析，针对业务内容、业务流程、技术框架进行沟通，形成《安全需求分析建议》。

安全设计环节：应根据项目特征，与测试人员沟通安全测试关键点，形成《安全测试建议》。
安全编码环节：应参考例如OWASP指南、CERT安全编码等材料编写各类《安全开发规范》，避免开发人员写出不安全的代码。
代码审计环节：应尽可能使用代码扫描工具并结合人工代码审核，对产品代码进行白盒、黑盒扫描。
应用渗透测试：应在上线前参照诸如OWASP之类的标准进行额外的渗透测试 。
系统发布：依据上述环节评价结果决定代码是否发布。
针对云服务对云平台的安全冲击，例如前文提到的ODPS存在通过用户程序包含的恶意代码在云服务商物理机上植入后门，实现非法外联、提权等一系列非法操作的风险，阿里云采用了研发虚拟化的沙箱或者解释器级别的沙箱来予以包装，并通过鉴权、授权等一整套安全措施来保证用户程序中可能包含的恶意程序无法在ODPS集群上直接执行。

回顾上述云安全带来的挑战，我们可以得出以下结论：

传统网络安全手段在云时代安全体系中的重要性下降了；
依靠应用软件实现的安全手段，以及应用软件开发本身的安全在云时代安全体系中的重要性将大大增强；
用户数据的集中化管理使安全管理和运营的重要性日益突出。
虽然云计算的背景下，云计算安全与传统信息安全的目标仍是相同的：“保护信息资产的保密性、完整性、可用性”，但云计算安全的保护核心正逐步从基础的信息安全风险管理转向数据安全管理，而阿里云在国内率先选择以数据为核心的云服务而不仅仅是传统的IDC，其基础设施通过ISO27001国际认证正是对此的有力回应。

作者沈锡镛，阿里巴巴集团安全部安全研究中心安全专家。云计算安全的专家及先行者，在云计算安全管理方面有很多分享。2012年加入阿里巴巴集团，着力于帮助快速成长但缺乏标准化管理的云计算领域建立安全管理框架。

更多精彩内容敬请关注《凌云》专区

《程序员》2013年杂志订阅送好礼活动火热进行中



CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

One Response to “云环境下的信息安全”
编程中国社区 说道：
2013年03月4日 12:45 下午
如果某天小日本的导弹不小心落到了云数据中心机房，那是不是所有的云用户都不能使用服务了～

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved

您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

如何在OSS上实现大文件的断点下载和上传 如何打造合作型团队——阿里内贸团队敏捷实践
二
26
云计算运维之“轻”与“重”
作者： baiyuzhong分类：云计算, 坊间人语  阅读：1,276 次 添加评论
文 /  张颖杰

云计算作为改变世界的力量，已经开始在各种应用实现中被不断印证，而现在还只是云计算生命周期的启航，这场变革的演进一定会超乎大多数人的想象。早些年，当我读到尼古拉斯·卡尔《IT不再重要》（The Big Switch: Rewiring the World, from Edison to Google）这类文章的时候，对于云计算所具备水、电般属性的勾勒，既为之兴奋，又苦恼无法为具化这些属性找到实践支撑。而最近三年来，云计算发展风生水起，以我这三年切身参与阿里云计算产品实现和落地的过程为例，恰好是云计算从“虚”到“实”变革演进的一个缩影。这过程中，我对于云计算运维在不断理解、摸索和实现中重构。本篇文章，即是对于云计算运维阶段性积累的部分分享。

云计算是公共资源，是一台超级计算机，大规模，低成本，可服务，是互联网时代的水和电… 云计算贴有很多这样的标签（Tag），但云计算时代的运维，到底为开发者和云计算平台运营商带来了怎样的Big Switch? 我的答案是运维之“轻”与“重”的转移，这“轻”与“重”的背后，体现了云计算运维和传统运维的差异性和核心竞争力的转移。

传统运维之“重”

传统网站的运维模式、业务和规模上虽然各有差异，但在结构上都很相似，从最底层的IDC（数据中心）、网络、服务器和系统等基础运维，到上层数据库、安全和产品等应用运维，需要环环相扣，层层覆盖。尤其对于一些小、微型开发者，麻雀虽小也要五脏俱全，各种运维任务如同一辆满载的货车，面对恶劣的路况（激烈的市场环境），为了保持行驶速度，要不断加油和维修（网站运维持续投入人力、物力，避免运维成为阻碍自身发展的瓶颈）；另一方面，由于运维所具有的专业性、规模化和周期性等特点，使得运维投入所换来的产出往往又不如人意。传统网站的运维模式，令许多网站不堪重负。


图1 云计算给开发商带来的变化
开发者运维之“轻”

在云计算时代，对于开发者的变化是什么？随着开发者的网站“上云”，开发者的网站运维将变得很轻、很薄。开发者可以集中优势资源专注于自身产品的研发和运营，把这部分核心竞争力做重、做厚。而产品的绝大部分网站运维工作隐身在背后那朵云里，由云计算平台运营商实现。对于开发者而言，云计算时代的网站运维可以举重若轻，如同将原来满载的货车，换成了快捷的跑车，轻松上路。例如，阿里云某开发者客户，自行维护网站时，需要10人以上的专属运维团队，经常面临网站高可用性、安全事件和设备成本投入等挑战，迁移到阿里云平台后，应用弹性计算ECS、负载均衡SLB、云盾和关系型数据库RDS等产品，其10多人的运维团队资源得到释放，可以补充到产品研发和运营中；网站高可用性得到提升；成本控制更具弹性。

云计算平台运营商运维之“重”

开发者实现网站运维之“轻”，并不是网站运维的挑战在云计算平台上真的减轻，而是这部分工作由云计算平台运营商来提供更专业的运维保障服务。拨开云雾，我们会发现云背后所承载的运维实现构成了云计算平台运营商的运维之“重”。“重”在这里有两层含义。一是“量”之“重”，以阿里云为例，所有的云产品都运行在“飞天”大规模云计算平台上，运维在保障这个平台服务质量中扮演着核心角色，从运维人员组织、过程改进、系统优化到运维支撑自动化系统等，各个环节都紧密围绕云计算平台特性进行协同。如何实现云计算运维的最佳实践，所涉及的技术难度、优化改进和操作强度在“量”上非常之“重”。二是“责任”之“重”，云计算平台的服务质量，直接关系到其上承载的万千开发者产品的可用性、口碑和生命力。过去3年，阿里云的开发者，包括我们的客户、合作伙伴，真正教会阿里云如何去实现一个云计算平台，让我们认识到所运营的云计算平台，如何关乎开发者切身利益，关乎生态系统的健康发展，责任“重”大。

云计算改变运维

云计算平台服务端的复杂性和创新性，对于运维是个全新的挑战，运维思路和方式都为之发生改变。这种改变不是简单的在传统运维上的优化，而是基于云计算特征孕育而生的运维重构；这种改变也并非一蹴而就，是随着云计算平台的发展过程不断演进，许多都没有最佳实践可循，是在摸着石头过河中不断积累经验。相对传统的网站运维，云计算平台运维的主要特征如下。

集群是基本运维单位：组成云计算平台的节点都是普通PC服务器，平台的高可用性，不再借助传统的高投入服务器硬件冗余方案（RAID、网络双上连、双电源等）实现，而是通过云计算平台自身的鲁棒性保障。这需要运维改变视角，从原来把服务器作为基本运维单位，转变为以集群作为基本运维单位。传统运维场景下的“及时”维修服务器，在云计算场景下，可以“轻松”定期维修。而这种“轻松”，并不是对运维需求的降低，而是基于对集群整体容量和健康状态的管理能力，即通过有效提炼和过滤各种服务器的个体运行状态，映射出集群的整体状态的能力。集群的容量管理、部署、监控、故障管理等运维任务，都必须以集群为单位进行。

大规模：单集群的规模，是衡量云计算平台能力的重要指标之一。对于生产环境而言，云计算集群也必须达到一定规模，才能实现云计算平台的高可用、低成本等真正价值。因此，在进行运维的规划和实现时，都要以满足大规模为必要条件。

可运维性是云平台基本属性：集群可运维性包括实现高效和大规模的部署、升级、迁移、扩容和故障管理等运维任务，是集群必须具备的能力。云平台从第一天设计开始，就必须包括该属性。开发团队和运维团队需要紧密协同，结合平台和运维特性加以实现。较之传统运维，云计算平台对于大规模集群的可运维性、可管理性等的要求高很多，是集群落地的刚性需求。

规范化：要在大规模下，实现集群部署、迁移、扩容等管理，依赖于从IDC设计、网络设计、服务器选型到云平台实现的全局统筹的规范化，这如同统一“度量衡”，实现“车同轨，书同文，行同伦”。规范化构成了云计算One Infrastructure重要属性。基于One Infrastructure的实现，把一批服务器从A集群迁移到B集群，只是在集群管理系统上对配置的远程变更，而不需要物理服务器实际搬迁。

解构阿里云平台运维

组织建设

阿里巴巴集团技术保障是“一个”团队（one team），阿里云、天猫、淘宝、etao、雅虎中国等阿里巴巴集团旗下产品，都由这个团队统一进行技术保障。团队的统一，可以确保运维体系的统一和运维资源的充分共享。换言之，阿里云的运维体系、网络质量、安全和支撑能力等和淘宝、天猫由同一个技术保障团队护航，在同一个支撑平台下实现。技术保障团队组织建设分横向、纵向两个维度。其中，纵向按照技术职能划分，主要包括基础运维、应用运维、DBA、安全和平台支撑等专业团队，确保各领域的专业性和技术深度；横向为了保障重点产品和项目，打破了团队界限，围绕产品建立“护航小组”。例如，阿里云弹性计算护航小组，成员包括平台和应用运维、DBA、安全和过程改进工程师，在2012年7-8月CCTV 5+网站奥运保障期间，该护航小组贯穿容量管理、压测、预案、性能优化、故障演练、重点赛事保障和资源弹性分配等全过程，之前团队间的任务，在“护航小组”模式下，变为团队内的任务，各角色紧密协同，发挥各自优势，上下游通畅，其高效、专注的工作特点取得良好的成效。

过程改进

如图2所示，运维过程从左到右将一个产品的生命周期中的业务研发、发布变更到生产运维贯穿起来。各个阶段的流程均具备可量化的KPI指标，能够清晰指示产品运维的健康程度和优化方向。例如，“生产变更提前计划率”可以指示一个产品发布的计划性和规范性，避免因为发布管理不善，而引发线上故障的风险。这3年阿里云的发展让我们深刻认识到，由于云计算平台自身的技术复杂性、大规模等特点，使得故障具备全局性、泛洪等特点，因此规范的运维流程和制度保障至关重要。


图2 云计算运维过程的改进
支撑系统

云计算平台和产品的高可用性实现，大规模、稳定、成本和效率之间的有效结合，都依赖于一套健壮、实用的运维支撑体系。服务于阿里云的运维支撑体系不是简单套用ITIL或拼凑开源运维工具，而是根据云计算集群大规模分布式的特点，由飞天和技术保障开发团队自主研发并不断完善中的一套系统，其子系统主要包括：基础运维、配置管理、生产变更、故障管理、集群容量、监控、集群运维等部分。从快速部署一套包括几千个计算、存储节点的飞天集群，到监控集群上万的任务和服务对象，运维支撑系统在可管理、可扩展、健壮性和自动化程度的提升，既是解放运维生产力的过程，也是云计算是否真正落地的重要标志之一。围绕飞天平台运维保障，从操作系统安装、飞天平台搭建、应用部署、变更发布、监控、容量管理、仪表盘（Dashboard），都有专门的运维工具实现，并且工具之间相互关联和协同。


图2 云计算运维过程的改进
云运维面临的挑战

高可用！开发者需要一个安全、高可用的网站环境开展业务，因此如何确保云计算平台和产品提供高可用性服务，是我们一直投入最大力量之所在。以故障管理为例，据相关机构统计，2012年国际知名云计算公司，先后发生多起云服务中断事件，此类事件的数量较2011年呈上升趋势，故障影响的周期从小时到天级别。分析这些故障背后的触发因素，包括代码Bug、IDC电力故障、网络故障、设备故障、配置变更错误等诸多因素，可见云计算的风险隐患较之传统网站并不少，结合云计算平台自身所具备的大规模等特点，故障在云计算集群因为规模化而存在被放大的隐患，故障恢复也因为海量数据等因素而延长，所以如何对于故障进行容错、容灾、有效隔离影响和快速恢复对于云计算运营商至关重要。面对这些挑战，阿里云产品开发团队和技术保障团队，把平台的高可用性放在最高优先级加以实现，这也是阿里云飞天平台重要的核心竞争力。其中，集群多Master HA、热升级、动态迁移、集群管理平台等，已在产品中普遍应用；技术保障团队在故障预案、容灾演练、工具自动化和应急响应等方面，在不断改进和完善。

共创云运维生态系统

阿里云计算平台是一个开放的生态系统，其中围绕云计算的运维，是构成这个生态系统的重要的生态链。从云产品开发者的“轻”运维，到云平台运营商的“重”运维，相得益彰，相互促进，才能打造健康的发展环境。这条运维生态链充满潜力，例如可以为第三方软件提供商（ISV）、第三方运维服务提供商提供平台，创造更细分和垂直的运维服务系统，丰富云生态系统，创造价值。以2012年11月的阿里云开发者大会为例，参赛作品中有相当比例是基于OSS和ECS等开发的管理类工具，这些第三方管理工具在云生态系统中，就可能找到自己的需求方，从而产生价值。第三方运维服务商也同样可以通过提供更细分、定制化的服务内容，在云生态系统中满足开发者用户的个性化运维需求。

云计算方兴未艾，可谓小荷才露尖尖角，精彩刚刚开始。运维作为云计算的天然组成部分，会越来越展示其重要性，成为云计算核心竞争力之一。让我们携手所有的阿里云开发者共创一个健康、开放的云计算运维生态环境；让阿里云计算平台运维重如泰山，稳若磐石；让开发者运维举重若轻，轻松在路上。

作者张颖杰，1999年投身互联网，先后供职于8848、雅虎中国、阿里巴巴。2009年开始，参与阿里云计算产品的技术保障工作。十几年运维生涯，正赶上中国互联网从萌芽到壮大的历史机遇，幸运参与其中，不断追逐梦想，让自己人生平添精彩和激情。

更多精彩内容敬请关注《凌云》专区

《程序员》2013年杂志订阅送好礼活动火热进行中





CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved


您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

Just Works的力量——Google科学家Jeff Dean斯坦福大学演讲的启示 如何在OSS上实现大文件的断点下载和上传
二
26
大规模分布式系统的测试实践
作者： baiyuzhong分类：云计算, 产品酷览  阅读：3,288 次 添加评论
文 / 许呙兢，陈舟锋，郑刚

飞天测试的挑战

飞天开放平台基于一个核心系统，即飞天大规模分布式计算系统（简称飞天）。飞天期望把几千台PC构成一台“超级计算机”，为上层多种不同的开放服务和云应用提供通用的分布式存储、计算和任务调度等多重功能。由此可以看出，飞天具有平台化、通用性和大规模的特性，于是，飞天测试的挑战也由此而来。

挑战一：平台软件的复杂性和互联网发布节奏之间的矛盾。

飞天包含多个复杂的分布式模块。模块本身的复杂性乘以各模块之间的协议依赖，按照传统软件开发流程计算，发布一个质量可靠的稳定版本通常需要1~2年。这样的发布节奏远远满足不了上层开放服务和云应用快速发展的需要。

挑战二：通用平台支持多种不同应用带来测试用例数的爆炸。

对于飞天，不同的应用场景、不同的数据量、不同的请求压力、不同的机器规模，有可能在代码里面走的路径完全不一样，对系统的压力点也各不相同。无论是试图覆盖所有应用对飞天的所有用法，还是从设计出发遍历模块接口的各种组合，对测试用例设计而言都是不收敛的。那么，当测试用例剪枝无门，是否还有其他捷径？

挑战三：对于大规模生产集群上的问题如何用小规模测试集群暴露。

在阿里各地的数据中心，飞天的生产集群是上千台物理机组成的。考虑到成本，测试集群规模通常不超过生产集群的十分之一。统计数据显示，100台和1000台的分布式环境的软硬件故障率、压力瓶颈点、数据量级、网络性能都会有很大差异。常规测试方法很难在小集群上发现大规模的问题。

下面，我们来谈一下飞天测试实践当前是如何应对这三种挑战的。

分层测试和持续集成

目前，飞天底层模块的发布节奏是半年一次，上层模块的发布则更为频繁，最短可以达到三周发布一次。这样的发布节奏主要依靠分层测试和持续集成的机制。按测试层次来分，飞天测试可以分为单元测试、功能测试、系统测试、集成测试、E2E测试（端到端测试）。为了加速飞天新版本的质量收敛，飞天团队几乎每个成员都会参与到上述测试类型中——无论是开发同学，还是测试同学。

一般来说，产品只会对外部接口进行功能测试和系统测试，但由于飞天模块本身就是分布式的，每个模块都具有一个传统软件产品的复杂度，所以模块团队除了负责单元测试，也会进行功能测试和系统测试。模块团队内，开发同学除负责单元测试之外，还会承担功能测试和局部特性的系统测试，测试同学通常更专注在测试设计和模块级别的系统测试。

飞天有独立于模块的集成测试团队，集成测试主要负责两块。

一方面，通过持续集成的回归测试集来保证系统中的各个模块改动集成在一起能够很好地工作，一旦发现无法短期修复的质量回退的话，模块改动会被立刻关闭或回滚。为保证持续集成效果，不同层次的回归测试集都被尽可能自动化，并且定义合适的回归频率，模块改动在设计时也会考虑方便关闭或回滚。

另一方面，集成测试也进行平台级别的系统测试，极尽所能地对飞天进行各种严刑拷打，考察底层模块的功能、性能和系统容量，以及在极端或典型应用场景下系统的稳定性和服务可用性。

飞天新版本上线前，开放服务团队一般都会用集成测试通过的版本跑E2E测试。E2E测试的责任人需负责向应用方了解具体需求，这个需求不仅是一个对接口功能的需求，还包含了数据量的需求、机器规模的需求、吞吐率的需求、延迟时间的需求以及业务量在一天或者一周内的曲线等信息。E2E测试通常要构造近乎完整的应用场景，尽可能模拟/重现真实的数据情况和压力特征，并且要通过长时间的稳定性测试。有些上层应用还会常备试运行环境（Staging Environment）来随时做E2E测试的验证。通常，我们只有在通过了最后的E2E测试之后才能上线给应用生产集群。

为保证测试本身的质量，各层测试覆盖有不同的衡量方法。单元测试用Coverage工具来检验行覆盖和分支覆盖；功能测试一般考察功能点覆盖外，这些都是大家熟知的。此外，我们对系统测试、集成测试和E2E测试设计了一种特别的覆盖——Log Coverage。Log Coverage工具能够通过测试运行过程中飞天输出的Log信息的多少来判断测试是否有足够的覆盖率。通过拿到生产集群的Log与测试中的Log进行比较，会找到我们之前没有测试到的地方。另外，通过对代码中从未打印出的Error Log的检查，我们也可以知道有多少异常逻辑我们没有测试过。

基于监控的探索性测试和灰盒测试

如挑战二所述，测试用例的爆炸一度让我们非常纠结。我们发现无法通过黑盒测试的设计思路来穷举所有的情况，即使能设计出足够完整的测试用例，也没有足够机器、人手和时间来执行这些测试。

所幸，我们还有探索性测试，监控系统则成为我们探索方向的指引。

飞天有详细的监控系统，可以监控整个集群的各种参数，这些参数不仅是OS层面的参数，更多的是飞天模块本身通过调用我们监控系统的API来完成对自身某些指标的统计。这些统计不仅在线上系统能够起到监控报警的作用，也能给探索性测试提供依据。执行测试的人员可以通过不断改变测试的各项参数，结合这些指标的变化进行探索式的测试，一个压力测试用例在执行时可以变化出贴近应用的各种极端场景。通常，通过指标在某些压力变化下或者随着时间推移时的异常行为，测试人员会更容易找到一些深藏的Bug。另外，在平台级别的系统测试时，通过对模块内部Error Log的监控也能达到很好的效果。

探索性测试固然重要，但仅有探索，如果测试人员本身不了解系统的一些内部逻辑的话，就会出现两种情况：第一种是只验证设计好的场景，其他一些异常的情况，自己无法解释，但本身又不是验证标准，导致很多隐藏的问题最终在线上爆发；第二种像一个无头苍蝇，漫无目的地进行探索，浪费了时间，却达不到好的效果。在飞天测试中，我们要求测试人员必须从方案设计之初甚至是讨论需求时就和开发的同学在一起讨论，测试的同学需要比开发更加理解系统的设计原则。

了解分布式系统的工作原理后，测试同学会明白如何去做一个有效的灰盒测试。比如，在某个关键点加请求压力会事半功倍；在哪个时机去做测试结果断言会更方便、彻底或完整；甚至知道对一个模块进程如何注入代码，模拟重现机率很小的协议通信丢包的问题。

有一个很典型的例子。早期，我们内部开发一个基于表结构的存储引擎时，曾出现过这样一件事情：测试程序在最终验证一致性时，一直都是通过的，但业务方和我们一起做E2E测试时，会有很低的概率发现数据读出来是错误的。测试人员百思不得其解，最后发现，这份数据在写入的时候，会先在三个地方进行修改，但由于一些时序和锁的问题，在改过了两个地方之后就返回成功了，第三个地方是在内存中，过一阵子就会被重新刷成正确的值。如果当时测试的同学知道系统里面的这些设计，当时就会设计写入过程中，对数据一致性进行实时检测，就不会在代价更高的E2E测试中发现问题，解决的效率也会因此而提高。

带压力和随机故障模拟的长时间稳定性测试

文首提到大规模生产集群上的问题，很难在小规模的测试集群上发现。究其原因，主要是两方面导致的。

大规模集群中原本小概率的单机故障会随机器数增加，导致集群整体的硬件故障率线性提升，甚至多种故障同时发生的概率也大大增加。
机器数增多会导致对飞天模块的压力点发生转移。以弹性计算（ECS）为例，在300台变600台时发现，原本担心的文件系统Master还未成为QPS瓶颈，负责锁文件协同的命名服务首先成为瓶颈。
此外，各种故障的组合爆炸也让完整的容错测试在设计和执行上的代价变得太大。

为解决上述困难，在飞天测试实践中，我们逐渐积累出一套带背景压力和随机故障模拟的长时间稳定性测试方案。背景压力主要是针对各个底层模块的读写压力，通常会针对某类应用场景来模拟。

基于分而治之和系统仿真的方法，我们实现了一些轻量级的压力工具，让各模块的Master机器和Slave机器分别接受到大规模生产集群上的类似访问压力和连接规模。另外，还增加一些诸如CPU、Memory、Network的资源消耗器，以模拟生产环境业务繁忙导致机器资源紧张的场景。

故障模拟上，一方面，尽可能丰富软件手段模拟软硬件故障，比如磁盘错误（包括坏盘、只读等）、机器宕机、重启、断网、交换机重启、主要模块进程重启、假死等；另一方面，这些故障模拟操作都会按照预先设定比例进行随机组合。在这样的背景压力和随机故障操作下，长时间（至少7×24小时）持续运行上层应用模拟程序/作业，同时通过在线监控系统来检查飞天是否正常。
简而言之，我们用背景压力解决压力点问题，用长时间跑解决小集群的故障小概率问题，用随机故障模拟和组合来解决容错测试设计和执行的代价问题。

实践证明，飞天很多重要的Bug都是通过这个测试被发现的。当然，这类测试也有短处，就是问题调查需要较长的时间，要求测试人员对系统有较深的了解和诊断能力。

结束语

大规模分布式系统的测试是一项非常有挑战的工作。尽管我们持续落实各层测试，积累实践经验，创新测试方法，但由于测试条件的限制、生产环境的复杂，软件问题仍然无法完全依赖测试消除。本文仅仅提到了飞天测试在Test in Lab方向的一些思考和实践，完善的飞天质量保证体系其实需要Test in Lab和Test in Production双管齐下，这才是飞天测试乐此不疲的努力方向。

作者许呙兢，阿里云飞天技术专家，负责飞天开放服务质量保障，长期工作在测试工作第一线，目前专注于分布式大规模在线场景的测试。

作者陈舟锋，阿里云飞天技术专家，负责飞天基础模块集成测试。毕业于北京航空航天大学，毕业后一直从事软件测试开发工作，曾就职于微软亚洲工程院和搜索技术中心，在UI自动化测试和分布式系统测试上有浓厚兴趣和较多积累。

作者郑刚，阿里云飞天高级专家，负责飞天集成测试和版本发布。毕业于南京大学，主要兴趣在大规模分布式系统的系统测试、持续集成和系统仿真。

更多精彩内容敬请关注《凌云》专区

《程序员》2013年杂志订阅送好礼活动火热进行中







CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved

您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

云计算成就代码之美——首届阿里云开发者大赛巡礼 大规模分布式系统的测试实践
二
25
Just Works的力量——Google科学家Jeff Dean斯坦福大学演讲的启示
作者： baiyuzhong分类：云计算, 产品酷览, 选题策划, 高端视点  阅读：13,126 次 添加评论
文 / 汪源

MapReduce、BigTable等系统的创造者Jeff Dean于2013年1月19日在斯坦福大学演讲的内容纵贯系统软件与机器学习两大领域。通过对资源共享及其带来的响应时间波动问题、异步分布式随机梯度下降算法及其应用这两块主要内容的介绍，Jeff Dean深入展示了通用、简洁、Just Works系统的强大魅力。同时演讲中展示的在深度学习领域取得的突破尤其振奋人心。

在Google众多杰出的计算机科学家中，Jeff Dean可能是最知名的。这不仅是因为Jeff Dean设计的MapReduce和BigTable等系统人尽皆知，开风气之先，也因为Jeff Dean比较喜欢做技术演讲。虽然只涉及Google强大技术的只鳞片爪，Jeff Dean的每次演讲都足以成为我们学习模仿的对象。

2013年1月19日，Jeff Dean在斯坦福大学做了题为“Large-Scale Data and Computation: Challenges and Opportunities”的演讲，从系统领域讲到机器学习领域，内容同样让人耳目一新，非常值得细细学习。

在这次演讲中，最核心的内容有两点：一是资源共享及其带来的响应时间波动问题；二是异步分布式随机梯度下降算法及其应用。

资源共享及其带来的响应时间波动问题

首先介绍资源共享及其带来的响应时间波动问题。为提高硬件资源利用率，Google的每台服务器可能同时承担很多种任务（看来Google虽然财大气粗，也是非常关注节约硬件成本的）。如图1所示，一台服务器可能既负责存储GFS中的某些chunk和BigTable中的某些tablet及承担一些CPU密集型的计算，又可能动态按需执行一些MapReduce的任务或应用逻辑。


图1 服务器承载的任务
资源共享，虽然能极大提升资源利用率，但同时也会导致操作响应时间变得不稳定。这是因为资源利用率越高，业务负载波动导致系统局部过载的概率就越大。

对于Google这样的复杂系统，基础操作的响应时间波动带来的影响更大。如图2所示，一次Google搜索需要通用Web搜索、广告、新闻等众多服务的配合，这些服务又需要存储等基础服务的支持。这样，一次搜索就会产生极大量的基础操作，这些基础操作的响应时间波动带来的影响就会被层层放大。为理解这一点，Jeff Dean做了一个简单的计算。假设1次基础操作的平均响应时间是10ms，99%响应时间是1秒。


图2 Google一次搜索所依赖的服务
如果1个业务操作需要做100次这样的基础操作，那么它的平均响应时间是1秒。这看起来似乎可以接受，但如果更仔细地计算一下会发现，实际上高达（算式1）的情况下某些基础操作的响应时间将超过1秒，从而导致业务操作的整体响应时间将超过2秒。


算式1
实际上，其中有两次基础操作的响应时间超过1秒，导致业务操作的整体响应时间超过3秒的概率仍高达（算式2）。因此，业务操作的响应时间分布将呈现出显著的长尾现象，大量业务的服务质量将不尽如人意。


算式2
因此，保证基础操作的响应时间尽可能稳定变得异常重要。实现这一点的常用方法是定期调整负载均衡策略来减少系统局部过载的概率（如果全局过载那只能扩容了），当然Google也这样做了。除此之外，Jeff Dean在演讲中还重点介绍了一种称为关联请求（Tied Request）的通用策略。

关联请求的原理是把操作请求发给两个都可独立完成服务的子系统，并告知对方的信息。如果在一个子系统中操作请求完成排队开始执行，就通知对方取消执行。对方收到通知后，如果操作请求还在排队，则取消执行。当然，如果操作也已经开始执行了，则不一定能取消，这时将带来额外的系统开销。

Google的经验是在数据中因为有低延迟的通信网络，这种操作在两个子系统都执行的最差情况发生的概率可以降到很低。

关联请求策略在降低GFS读操作响应时间上取得了非常好的效果。在处理GFS读请求时，GFS客户端首先发送关联请求到其中一个复本，如果2ms之后该复本上的读操作还没有开始，则再发送关联请求到另一复本。

表1显示了使用关联请求策略改善GFS读操作响应时间的显著效果。可以看到，无论是空闲还是繁忙的系统，关联请求策略都可以将90%~99.9%响应时间降低40%左右。


表1 使用关联请求策略改善GFS读操作响应时间的显著效果
同时也可以看到，优化后，繁忙系统的响应时间基本与优化前基本空闲的系统相当。关联请求策略似乎“神奇”地消除了负载增加对响应时间带来的负面影响。当然，读者可能会担心这一策略是否增加了大量额外的读操作。关于这一点，Jeff Dean透露为此增加的读操作只有约1%，非常低。

实际上，关联请求策略在降低GFS读操作响应时间中体现的效果还不是最显著的，Jeff Dean在另一个题为“Achieving Rapid Response Times in Large Online Services”的演讲中还讲到一个效果更显著的测试结果。在这个测试中，使用关联请求优化后，每千次BigTable内存读操作的平均和99%响应时间降低了约60%，99.9%响应时间更是降低了约95%。

通过如下的简单计算就可以说明关联请求策略为什么有效。同样用上述平均响应时间10ms而99%响应时间1秒的例子。如果不用关联请求策略，那么1%的情况下响应时间会超过1秒，但如果用了关联请求策略，由于两个子系统是独立的，那么超过1秒的概率就只有0.01%。

异步分布式随机梯度下降算法及其应用

再来介绍异步分布式随机梯度下降算法及其应用。Google有很多重要产品（如机器翻译、语音识别等）的核心是机器学习。

近年来很多学术成果表明使用多层复杂神经网络的深度学习（Deep Learning）技术可以有效改进很多机器学习任务的性能，并发展了GPU计算技术使得训练千万个参数级别的模型成为可能（参见Jeff Dean为第一作者发表的论文“Large Scale Distributed Deep Networks”）。但很多Google产品的数据规模实在太大，要有效应用深度学习技术，至少需要10亿参数级别的超大规模神经网络。这样，就必须依赖大规模集群的并行计算能力，才能完成Google所需的超大规模网络模型的训练。

神经网络的训练本质是一个最优化问题（实际上机器学习的大部分问题都是最优化问题），而随机梯度下降（Stochastic Gradient Descent）算法可谓求解最优化问题的不二法门。最优化问题是求解使目标函数取得最小值时的参数值（通常是个向量）。使用随机梯度下降算法求解最优化问题时，首先用某种方法选取参数的初始值，然后持续随机选取某一训练数据来更新参数值。针对选择的训练数据，每个参数值将获得与其偏导数成某固定（一般很小）比例但反向的更新，即如下面的公式所示，为目标函数，为第个参数，为更新的固定比例，一般称为学习速率。系统会重复执行上述更新过程，直到最终获得的更新量足够小，这时所得的参数值将接近最优解，算法停止（理论上讲，算法可能陷入局部最优解或无法收敛，但实际应用中很少会发生）。这一算法容易直观理解，使用与其偏导数成某固定比例但反向的量来更新，将使得目标函数稍稍趋向于0，并且偏导数越大，更新量越大，学习得“越快”。

随机梯度下降算法是机器学习中非常基础的算法，但缺乏优秀的分布式并行实现。Jeff Dean等人观察到大多数深度学习所用的网络模型可以良好地分区。基于此观察，他们设计了一个性能和容错性都非常好的分布式并行随机梯度下降算法（Asynchronous Distributed Stochastic Gradient Descent，以下称Async-SGD算法）。

现在来介绍下Async-SGD算法的基本原理。如图3所示，训练数据被分成多份（Data Shard），每份训练数据由一个模型训练集群复本（Model Workers）来处理。每个模型训练集群复本又可能包含很多台服务器，每台服务器将负责某些模型分区的训练。模型的参数统一存储在一系列参数服务器（Parameter Server）上，也做了水平分区。


图3 异步分布式随机梯度下降
由于模型可以良好地分区，每台模型训练服务器只需要访问少量的参数服务器来存取它所负责的模型分区所需的部分参数。这样，训练数据、模型、参数都可以并行处理，系统因而就具有很好的可伸缩性。同时，部分模型训练服务器宕机不会影响到其他模型训练服务器，系统的容错性也很好。模型训练服务器可进行一批多次迭代后才更新参数到参数服务器。通过调整这一“批次”大小，还能提高并行计算性能（当然这样训练出来的模型精度可能会下降）。对这一算法的细节感兴趣的读者可以参考上面提到过的“Large Scale Distributed Deep Networks”这篇论文。

基于随机梯度下降算法在机器学习中的核心地位，算法一突破，大量产品就能广泛受益。在演讲中，Jeff Dean重点讲了Async-SGD算法的3个应用，每个都是超重量级。

应用于语音识别中的声学模型。通过800台服务器近5天的训练，Async-SGD算法产生的声学模型将语音识别的词错误率（Word Error Rate）降低了30%。这一效果抵得上过去20年的语音识别研究成果。在最新的Android 4.1版里已经包含了这一模型。
应用于语言模型。通过对Google News多达70亿单词的庞大语料库的训练，所得语言模型的复杂度（Perplexity）接近5-gram（高15%），且与5-gram联合使用时比纯5-gram低了多达33%。语言模型是决定语音识别性能的关键指标，低33%的复杂度意味着后续处理时要考虑的词汇量平均将减少1/3，这对语音识别性能提升的帮助无疑是巨大的。
应用于YouTube视频帧和ImageNet图像的无监督/半监督式特征学习。使用1000万张取自YouTube视频帧的图像训练了多达11.5亿参数、最上层神经元多达6万个的超大神经网络，自动获得了非常多的图像特征提取/判别器。
比如，某个神经元是一个很好的人脸检测器，而另一个神经元则是一个很好的猫脸检测器。同时，以此无监督学习的结果为起点，结合ImageNet的标签数据，也非常显著地提升了对ImageNet图像的分类性能。

除了上述介绍的两大主题，Jeff Dean的这次演讲内容广泛（PPT就长达124页），还涉及了数据中心、系统架构、Spanner等众多其他主题。因为篇幅有限，加之Jeff Dean对这些主题的介绍是点到即止，不怎么深入，这里就不一一介绍了。

启示

介绍完演讲内容，叹服之余，我想更重要的是思考Google的经验能给我们带来什么启示。

首先，我认为Jeff Dean非常好地展示了如果能在通用核心领域取得突破，应用价值将极其巨大；而Jeff Dean在演讲中强调，好的通用系统应该提供高层次的抽象从而简洁易用，用Jeff Dean的原话来说就是Just Works。Jeff Dean所创造的MapReduce、BigTable、Spanner等产品，正是他这一理念的完美体现。
Jeff Dean能突破自己之前一直根植的系统领域，“跨界”到机器学习领域并能做出杰出的工作，我想主要就是因为他始终坚持做通用、Just Works系统的理念。如果再看一看计算机领域，应不难发现诸如关系数据库、事务处理、UNIX等系统大获成功的原因，即它们都提供了简洁优雅的抽象，从而使得系统既功能强大又易于使用。因此，对工程师和架构师来说，把系统做到通用、简洁、Just Works确实非常重要。我想，只有理解这一点，我们才算触及了Jeff Dean这次演讲的实质。

其次，我认为Jeff Dean在演讲中所展示的机器学习的图景非常振奋人心。Jeff Dean等人的工作表明超大规模神经网络的训练问题可以通过分布式计算有效解决，并且一旦解决这一核心问题，很多机器学习任务的性能将前进一大步。
我想，从本质上说，如果希望机器的智能接近或超越人类的智能，机器所用的模型应具备与人脑相当的复杂结构；而如果有了正确的方法，更复杂的模型自然能蕴含更多的智能。因此，通过分布式计算以支撑越来越复杂的模型，将是机器学习发展的必经之路，同时也很可能是希望之路。

Google目前能训练的模型还不超过20亿个参数，Jeff Dean说希望将来能做到1000亿个参数。希望Jeff Dean能早日实现这一愿望，届时Jeff Dean可能会向我们展示更为震撼的人工智能图景。

作者汪源，网易杭州研究院副院长。长期耕耘于数据库与海量数据处理领域。现负责网易公司在多媒体、信息安全、大数据、云计算与数据库等公共技术的研发工作。



本文选自《程序员》杂志2013年3期，未经允许不得转载。如需转载请联系 market@csdn.net

《程序员》2013年杂志订阅送好礼活动火热进行中



CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

2 Responses to “Just Works的力量——Google科学家Jeff Dean斯坦福大学演讲的启示”
z 说道：
2013年02月26日 11:40 上午
虽不明 但觉厉

独狼小黑 说道：
2013年02月26日 1:43 下午
人工智能，我喜欢

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved

您还未登录！|登录|注册|帮助首页业界移动云计算研发论坛博客下载
更多
技术改变世界 创新驱动中国 – 《程序员》官网

高端视点
IT名人堂
产品酷览
CTO视点
坊间人语
架构实践
每日关注
热点报道
选题策划
往期杂志
云计算
卷首语
图书推荐
移动专区
程序春秋
管理
读者俱乐部

《程序员》2013年3期精彩内容：前端 云平台开发商 大有可为——2012阿里云开发者大会观察
二
25
“双11”电商狂欢背后的云计算
作者： baiyuzhong分类：云计算, 坊间人语, 架构实践  阅读：4,562 次 添加评论
文 /  李金辉

数据解读2012年的“双11”

2012年淘宝“双11”的交易总额达到惊人的191亿元。根据国家统计局发布的数据：2012年10月中国社会消费品零售总额为18934亿元，平均到每天约为610亿元。这意味着在“双11”当天，中国人消费的每3元钱中就有1元是通过淘宝平台交易的，同时标志着以淘宝为代表的电子商务新经济的巨大胜利。

在激动人心的业务数据背后，淘宝技术平台和商家自身的技术平台承受了巨大压力——世界上再没有一个网站比淘宝“双11”当天的并发访问量还大。在这场业务和技术的双重盛宴中，云计算发挥了中流砥柱的作用。本文将为大家详细分析云计算为商家带来的价值以及云计算如何帮助商家解决其技术难题。

谈到2012年“双11”流量高峰对技术平台的挑战就不得不提到“聚石塔”。聚石塔是淘宝推出的电商开放云工作平台，以阿里云云计算服务为基础，为商家提供了进销存OMS/ERP系统、仓储WMS系统、物流TMS系统、会员CRM系统的IT运行环境，这些信息系统帮助商家完成库存管理、发货管理、客户服务等工作。不夸张地说，2012年“双11”即使淘宝自身的商品浏览/交易系统能应对流量高峰，但如果商家自身的这些信息系统崩溃的话，商家也将丢掉191亿元中的绝大部分订单而无法给买家发货，所以说聚石塔在2012年“双11”发挥了重要作用。同时，聚石塔是阿里云所有云计算服务亮相最完整的组合应用场景，包含了云服务器、负载均衡服务SLB、关系型数据库服务RDS、开放存储服务OSS、开放结构化数据服务OTS、云监控、云盾，这标志着阿里云云计算技术的成熟达到新的高度。经过了最复杂应用场景的实战考验，请看看聚石塔在2012年“双11”震撼人心的数据：

20%：聚石塔内ERP系统处理的订单量占淘宝和天猫全站订单量的比例为20%；
单商家65万订单：某保暖内衣品牌官方旗舰店当天收到订单65万笔，这相当于国内一线B2C公司一天的订单量总和；
0丢单：聚石塔内所有商家的信息系统0丢单；
0故障：“双11”当天聚石塔平台技术0故障，相比之下，某家纺品牌2011年“双11”丢失了2万个单子，经济损失50万元；
5分钟：帮助5个商家在5分钟内把系统迁移到聚石塔平台，为其挽回经济损失2000万元；
24次攻击：帮助聚石塔内商家抵御了24次异常网络攻击。
云计算给商家带来的变化

先来看看2011年“双11”没有使用云计算服务的淘宝商家的备战过程：

“双11”前2个月前就要开始采购服务器资源，买多了浪费、买少了不够用，这些资源在“双11”之后就处于闲置，成本高昂；
需要聘请运维专家购买服务器、租机架、规划网络，其中一个商家从代理商那里买到的DELL服务器是假货，正准备和代理商打官司，这些繁琐的工作经常影响商家促销活动的执行；
某商家的淘宝店铺售出1万件商品，但商家的发货系统没有接到订单，于是没有给买家及时发货，后续投诉不断造成其淘宝店铺信用大幅下降；
某集团的ERP系统在2011年“双11”几小时不可访问造成经济损失上百万元；
商家想在“双11”当天组织更大的促销活动，但被技术人员告知后台系统无法支撑更大压力而只能取消。
2012年“双11”淘宝商家因为有了云计算服务为基础的聚石塔，再来看看他们如何轻松淡定地应对：

用鼠标在网站上进行1分钟的操作就购买到了云服务器、负载均衡服务以及各种存储服务，无需事前的精细规划，也无需聘请运维专家；
100台云服务器从购买到启动只需10分钟；
系统再也没有丢单问题，2012年聚石塔内商家0丢单；
“双11”当天订单量来多少接多少，无需担心系统能力不足；
某服装品牌官方旗舰店在“双11”当天临时加大促销力度，后台系统依然坚如磐石；
某电子商务营销公司基于开放存储服务OSS搭建的流量导入静态网站，“双11”全天只花费了2.8元。
从使用云计算服务前后的对比可以看到，云计算给商家带来了实实在在的好处：使商家技术平台的构建更加容易从而专注于自身业务创新；使商家技术平台的运行更加稳定，使商家技术平台具备良好的伸缩性；同时还使其IT成本显著下降。

云计算如何解决商家的技术难题？

让我们先梳理一下“双11”商家的技术平台会面临的困难：

系统访问量不可预测，瞬间高并发访问使系统崩溃；
系统压力增大后各个信息系统都可能遭遇单点瓶颈或故障；
遭遇异常网络攻击后束手无策；
业务变化频繁，提前数月采购服务器风险高且极易浪费。
那么面对这些技术挑战，云计算是如何帮助商家应对的呢？图1显示聚石塔内商家基于阿里云服务的系统架构。

以上系统架构包含了阿里云的负载均衡服务SLB、云服务器、关系型数据库服务RDS、开放存储服务OSS。SLB和云服务器组合起来负责提供对外HTTP服务，云服务器上部署了Apache或Nginx，SLB负责流量转发；RDS负责存储用户信息、商品库存信息、发货信息等需要关系运算的结构化数据；OSS负责存储图片、视频、音频、大文件等数据；另外SLB、RDS、OSS都会处于云盾的安全防护之下，可自动防御异常网络攻击。

用户请求的处理过程如下：

用户通过终端提交HTTP请求，SLB把请求转发到某个云服务器节点上的HTTP Server；
HTTP Server向后端的RDS集群请求结构化数据；
HTTP Server向后端的OSS集群请求图片、视频数据；
HTTP Server向用户返回请求结果。
接下来逐条分解云计算如何解决商家的4个技术难题。

系统访问量不可预测，瞬间高并发访问使后台系统崩溃
云计算通过两种技术手段来应对不可预测的访问量：第一，多个分布式集群把资源池和处理能力配备得足够大，大到远远超过用户可能出现的峰值访问量的需求；第二，通过极高的弹性来保证应用系统可以快速地获得计算资源和处理能力。

在处理能力方面，阿里云的OSS每秒请求数能达到50000，数据存储量能达到10PB，下行带宽能达到上百Gbps，RDS的单机iops能达到40000，云服务器的实例数能达到20万台，云计算底层平台飞天单集群规模已经达到10万核，达到了世界领先水平。另外，云计算的合理假设是平台上所有客户不会同时达到访问量峰值，这样“双11”虽然电商系统的峰值访问量大，但平台上所有客户的访问量总和增加并不大，云计算服务能轻松应对。

在弹性方面，OSS和SLB是实时的弹性，后台为单个客户配备的处理能力会随着客户业务的变化而实时变化，云服务器的弹性扩容周期在5分钟以内，也就是操作系统启动的时间，另外同时获得100台云服务器实例只需要10分钟，资源的获取效率在传统模式下无法想象。

案例：2012年“双11”，广东某服饰商家原本预计全天的订单量是1万多单，刚开始并没有将系统部署在聚石塔的云平台上。但上午10:00，该商家的订单迅速升至2.7万笔，其后台系统接近瘫痪，漏单数达到了1.8万单，直接经济损失400万元，于是他们当机立断把系统迁移到聚石塔。迁移上来后，由于有了云计算的巨大处理能力和弹性扩容保证其系统能应对瞬间的并发访问，再无丢单情况发生。11月12日凌晨，该商家的负责人满怀感激地说：“非常感谢你们的快速响应，更感谢聚石塔和云计算救了我们！”

系统压力增大后，各个信息系统都可能遭遇单点瓶颈或故障
商家信息系统通常遭遇的单点瓶颈类型有：单个数据库服务器磁盘iops能力耗尽、单台Web服务器CPU Load过高或内存不足，在真实访问压力来临之前难以准确预知哪个子系统会遭遇单点瓶颈。最好的选择是将各个子系统设计成分布式的并能平行扩展，不管是数据库、Web Server还是存储系统都需要分布式，但分布式系统设计的复杂程度让大部分商家的技术团队望而却步。云计算服务将分布式系统的复杂性屏蔽在内部，帮助商家建立可以水平扩展的应用系统，完全消除了上层应用的单点瓶颈。在上述商家的典型系统架构图中，当前端HTTP服务遭遇瓶颈，可快速添加云服务器服务节点到SLB中提升前端的处理能力；当OSS的处理能力遭遇瓶颈，OSS系统内部会自动扩展并保持对应用层透明。OSS的平行扩展方式如图2所示，oss.aliyuncs.com是OSS唯一的对外访问接口，后面部署了多个OSS存储集群，每个OSS存储集群中有多个存储节点，蓝色部分的“存储节点N+1”和“OSS存储集群N+1”都是自动扩展出来的，在这种结构下，OSS的处理能力可以无限扩展。



案例：2012年“双11”，广东某皮具商家的ERP系统有段时间访问缓慢，有部分订单在排队处理中。当收到监测数据的报警后，聚石塔在5分钟内为商家添加了前端云服务器节点，系统处理能力通过平行扩展后迅速提升，对订单的处理立即与淘宝技术平台实现了实时同步。

遭遇异常网络攻击后束手无策

网络攻击的危害很大，同时也是系统维护人员最头疼的事情。各种网络攻击防不胜防，常见的攻击类型有DDoS攻击（CC、SYN flood、UDP flood）、破解主机密码、利用网页漏洞进行SQL注入和挂载木马等，如果商家没有一个专业的网络安全团队，遭遇网络攻击后基本上就会束手无策。阿里巴巴集团用十年的网络攻防技术积累打造出全方位的安全产品——云盾，提供防DDoS攻击服务、防入侵以及网站安全检测等功能，还在多个云计算服务的外层建立了强大的主动防御体系，云服务器、RDS、SLB、OSS外层都默认部署了云盾。当用户的访问流量经过互联网到达阿里集团的内部网络时，需要经过多个硬件防火墙和流量清洗设备，然后经过云盾的异常流量检测流程，最后到达用户的SLB和云服务器。SLB和云服务器内部还配备了应用防火墙功能，能穿透这层层安全防护的异常流量少之又少，商家无需再担心被攻击的严重后果。

案例：2012年“双11”当天，聚石塔内某电商服务商的其中一个ERP系统遭受UDP flood攻击，流量达到20Gbps，国内已经没有其他安全产品能抵抗住这个规模的攻击。云盾团队收到短信报警后迅速响应，通过调整流量清洗设备的多项配置将异常流量抵挡在外，而客户系统的正常访问不受影响。后来黑客还多次发起攻击都无功而返，这次精彩的安全攻防战让黑客也束手无策了一回。

业务变化频繁，提前数月采购服务器风险高且极易浪费
前文已阐明云计算技术帮助商家应用系统变得弹性，系统规模能随着业务的变化而变化；而云计算服务按实际使用收费的模式则帮助商家消除提前采购服务器的财务风险。另外，无需为业务峰值需要的硬件资源提前投资，5分钟内即可获得需要的计算资源，可以帮助商家大幅降低IT成本。

案例：2012年，浙江某电子商务营销公司的技术人员在11月1日找到阿里云，说要构建一个在“双11”期间承接外部广告流量的静态网站，网站最终把流量导入淘宝的多个店铺。那时离11月11日只剩下10天，采购物理服务器租机架肯定来不及了。阿里云的架构师了解到客户的网站“双11”当天承载的访问量大概是20万PV，每个PV下载的数据量60k左右，重要特征是网站是纯静态的，于是建议其使用阿里云的OSS部署网站，结果1天就完成了网站的开发和上线。该公司在“双11”当天多次加大导入的流量压力，因为OSS系统规模具备伸缩性，网站的访问速度一直保持在30ms以内；另外OSS的收费模式是按实际使用的资源付费，最终它在“双11”当天支付给阿里云的费用只有2.8元，而客户用这2.8元支撑了50000元的销售额。后来该公司的CEO知道此事后还专门咨询阿里云到底是怎么做到的，阿里云给出的回答是：因为有了云计算！

从“双11”的诸多案例中不难看出，云计算服务的核心价值是把商家从复杂的技术问题中解放出来使其专注于核心业务。以阿里云为首的中国云计算公司正在悄然地改变许许多多的产业，电子商务产业是其中的典型代表，每个产业中能充分认识和利用云计算价值的企业很有可能会成为其产业的下任领导者。

作者李金辉，阿里云云计算业务部业务架构师，负责云计算产品的规划设计及云计算应用系统架构。北京理工大学模式识别专业硕士，拥有8年大型分布式软件开发和架构经验，5年软件项目管理经验，对云计算底层系统、在线搜索引擎系统、大规模离线数据处理系统的架构设计有深刻的理解。

更多精彩内容敬请关注《凌云》专区

《程序员》2013年杂志订阅送好礼活动火热进行中





CSDN

全球最大中文IT社区

CSDN移动频道

专注于移动应用开发者的创优和创富

CSDN云计算频道

做领先的云计算技术传媒

程序员杂志

面向软件开发者及管理者的专业月刊

CSDN蒋涛

CSDN和《程序员》创始人

刘江

CSDN&《程序员》总编

----->立刻申请加入《程序员》杂志读者俱乐部，与杂志编辑直接交流，参与选题，优先投稿

2 Responses to ““双11”电商狂欢背后的云计算”
asbai 说道：
2013年02月26日 6:10 下午
此文有点软过头了。。。。。。

suoopo 说道：
2013年03月8日 5:58 下午
太软了

请评论

姓名 (required)


邮件(不会公开) (required)


网站





订阅





   如何订阅？
《程序员杂志》iPad下载

分类目录
高端视点 (139)
IT名人堂 (65)
产品酷览 (46)
CTO视点 (116)
坊间人语 (219)
架构实践 (124)
每日关注 (114)
热点报道 (204)
选题策划 (169)
往期杂志 (45)
云计算 (65)
卷首语 (7)
图书推荐 (62)
移动专区 (67)
程序春秋 (14)
管理 (52)
杂志订阅

索引
2013 年三月
2013 年二月
2013 年一月
2012 年十二月
2012 年十一月
2012 年十月
2012 年九月
2012 年八月
2012 年七月
2012 年六月
2012 年五月
2012 年四月
2012 年三月
2012 年二月
2012 年一月
2011 年十二月
2011 年十一月
2011 年十月
2011 年九月
2011 年八月
2011 年七月
2011 年六月
2011 年五月
2011 年四月
2011 年三月
2011 年二月
2011 年一月
2010 年十二月
2010 年十一月
2010 年十月
2010 年九月
2010 年八月
2010 年七月
2010 年六月
2010 年五月
2010 年四月
2010 年三月
2010 年二月
2010 年一月
2009 年十二月
2009 年十一月
2009 年十月
2009 年九月
2009 年八月
2009 年七月
2009 年一月
近期文章
如何对付团队中的害群之马
Eucalyptus首席财务官王宁：有理想，就去追
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光
Twitter高级软件工程师岳峣：做好自己喜欢的事
携程突围——携程副总裁兼无线事业部总经理江浩专访
阿里云观察——阿里云总裁王坚专访
HTML&CSS构建网站链接
视讯云的云平台迁移之路
Android软件安全开发实践（下）
云推荐——大数据时代的个性化互联网服务解决之道
近期评论
http://cijfeye.blog.china.com/ 发表在《如何对付团队中的害群之马》
http://www.lxnkm.com 发表在《如何对付团队中的害群之马》
SAP全球企业官孙小群：掌握自己的命运，让生活充满阳光 - 品谷 发表在《《程序员》2013年3期精彩内容：前端》
Twitter高级软件工程师岳峣：做好自己喜欢的事 - 品谷 发表在《Eucalyptus首席财务官王宁：有理想，就去追》
http://bbs.8dn.com 发表在《如何对付团队中的害群之马》
热点文章
阿朱分享：中国互联网十五年的22个创新模式 - 233,827 次
开放平台下的商业模式浅析 - 198,812 次
2011程序员薪资调查报告全文发布 - 155,800 次
C#之父Anders Hejlsberg演讲解读：编程语言大趋势 - 91,422 次
揭秘IT人才特点：中美印日四国程序员比较 - 91,312 次
09期《程序员》推荐 创新工场新推助跑计划：最重要的是人 - 85,443 次
我的七个建议 - 82,332 次
软件工程师的十个“不职业”行为 - 81,335 次
《程序员》12期精彩内容：十年 - 81,219 次
《程序员》精彩推荐：Android程序创意过滤与失败经验谈 - 79,088 次
投票
敏捷实践中您都采纳了哪些方法？

 AMDD（敏捷模型驱动模型）
 AUP（敏捷统一过程）
 Crystal Methods（水晶方法族）
 DSDM（动态系统开发方法）
 FDD（特性驱动开发）
 MSF（微软解决方案框架）
 RUP（统一软件过程）
 Scrum
 XP（极限编程）
 其它


查看投票结果

以往投票
关于我们
杂志Blog
投稿指南
广告招商
杂志订阅
关于我们
链接
CSDN
CTO俱乐部
《程序员》杂志读者俱乐部

京ICP备06065162
公司简介|招贤纳士|广告服务|银行汇款帐号|联系方式|版权声明|法律顾问|问题报告
京 ICP 证 070598 号
北京创新乐知信息技术有限公司 版权所有
世纪乐知(北京)网络技术有限公司 提供技术支持
江苏乐知网络技术有限公司 提供商务支持
 联系邮箱：webmaster(at)csdn.net
Copyright © 1999-2012, CSDN.NET, All Rights Reserved